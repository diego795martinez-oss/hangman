<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Word Hunter</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        /* Custom animations not in Tailwind default */
        @keyframes dash {
            to {
                stroke-dashoffset: 0;
            }
        }
        .dash-draw {
            stroke-dasharray: 1000;
            stroke-dashoffset: 1000;
            animation: dash 2s linear forwards;
        }
    </style>
</head>
<body class="bg-slate-900 text-slate-100 min-h-screen">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useCallback } = React;

        // --- Icons ---
        const Plus = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
        );
        const RotateCcw = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 12"></path><path d="M3 3v9h9"></path></svg>
        );
        const SkipForward = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polygon points="5 4 15 12 5 20 5 4"></polygon><line x1="19" y1="5" x2="19" y2="19"></line></svg>
        );
        const X = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
        );
        const Trophy = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"></path><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"></path><path d="M4 22h16"></path><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"></path><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"></path><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"></path></svg>
        );
        const Skull = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m12.5 17-.5-1-.5 1h1z"></path><path d="M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 17v1a1 1 0 0 0 1 1z"></path><circle cx="15" cy="12" r="1"></circle><circle cx="9" cy="12" r="1"></circle></svg>
        );
        const Sparkles = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L12 3Z"></path><path d="M5 3v4"></path><path d="M9 5H5"></path><path d="M19 19v4"></path><path d="M15 21h4"></path></svg>
        );
        const Settings = ({ size = 24, className = "" }) => (
             <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.1a2 2 0 0 1-1-1.74v-.47a2 2 0 0 1 1-1.74l.15-.1a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"></path><circle cx="12" cy="12" r="3"></circle></svg>
        );

        const MAX_MISTAKES = 6;

        function App() {
            // Start with empty words and 'setup' status
            const [words, setWords] = useState([]);
            const [gameStatus, setGameStatus] = useState('setup'); // 'setup', 'playing', 'won', 'lost'
            
            const [targetWord, setTargetWord] = useState("");
            const [guessedLetters, setGuessedLetters] = useState(new Set());
            const [setupInput, setSetupInput] = useState("");
            
            // Handle parsing the setup list
            const handleSetupSubmit = (e) => {
                e.preventDefault();
                // Split by comma, new line, or space
                const rawWords = setupInput.split(/[\n, ]+/);
                const cleanWords = rawWords
                    .map(w => w.trim().toLowerCase())
                    .filter(w => w.length > 0 && /^[a-zA-Z]+$/.test(w));
                
                if (cleanWords.length === 0) {
                    alert("Please enter at least one valid word (letters A-Z only).");
                    return;
                }

                if (cleanWords.length < rawWords.length) {
                    // Optional: You could alert here that some words were dropped
                    // console.log("Some words were dropped due to invalid characters");
                }

                setWords(cleanWords);
                
                // Start the first game immediately with these words
                const randomWord = cleanWords[Math.floor(Math.random() * cleanWords.length)];
                setTargetWord(randomWord.toUpperCase());
                setGuessedLetters(new Set());
                setGameStatus('playing');
            };

            const startNewGame = useCallback(() => {
                if (words.length === 0) {
                    setGameStatus('setup');
                    return;
                }
                
                // Try to get a word that isn't the current one (if possible)
                let randomWord;
                if (words.length > 1) {
                    do {
                        randomWord = words[Math.floor(Math.random() * words.length)];
                    } while (randomWord.toUpperCase() === targetWord);
                } else {
                    randomWord = words[0];
                }

                setTargetWord(randomWord.toUpperCase());
                setGuessedLetters(new Set());
                setGameStatus('playing');
            }, [words, targetWord]);

            const returnToSetup = () => {
                setGameStatus('setup');
                setWords([]);
                setTargetWord("");
            };

            const guessLetter = (letter) => {
                if (gameStatus !== 'playing' || guessedLetters.has(letter)) return;

                const newGuessed = new Set(guessedLetters);
                newGuessed.add(letter);
                setGuessedLetters(newGuessed);

                const isLoss = Array.from(newGuessed).filter(l => !targetWord.includes(l)).length >= MAX_MISTAKES;
                const isWin = targetWord.split('').every(l => newGuessed.has(l));

                if (isLoss) setGameStatus('lost');
                else if (isWin) setGameStatus('won');
            };

            useEffect(() => {
                const handleKeyDown = (e) => {
                    if (gameStatus === 'setup') return; // Don't capture keys in setup mode
                    const char = e.key.toUpperCase();
                    if (/^[A-Z]$/.test(char)) {
                        guessLetter(char);
                    }
                };
                window.addEventListener('keydown', handleKeyDown);
                return () => window.removeEventListener('keydown', handleKeyDown);
            }, [guessedLetters, gameStatus, targetWord]);

            const mistakes = Array.from(guessedLetters).filter(l => !targetWord.includes(l)).length;

            // --- RENDER SETUP SCREEN ---
            if (gameStatus === 'setup') {
                return (
                    <div className="min-h-screen bg-slate-900 text-slate-100 flex flex-col items-center justify-center p-4 font-sans selection:bg-indigo-500 selection:text-white">
                        <header className="mb-8 text-center">
                            <h1 className="text-4xl font-bold bg-gradient-to-r from-indigo-400 to-cyan-400 bg-clip-text text-transparent flex items-center justify-center gap-2 mb-2">
                                <Sparkles className="text-indigo-400" /> Word Hunter
                            </h1>
                            <p className="text-slate-400">Custom Game Setup</p>
                        </header>

                        <div className="w-full max-w-lg bg-slate-800/50 backdrop-blur-sm rounded-3xl p-8 shadow-2xl border border-slate-700">
                            <form onSubmit={handleSetupSubmit}>
                                <label className="block text-white font-medium mb-3 flex items-center gap-2">
                                    <Plus className="text-indigo-400" size={20}/> 
                                    Step 1: Create your word list
                                </label>
                                <p className="text-slate-400 text-sm mb-4">
                                    Enter the words you want to play with.
                                    <br/>
                                    <span className="text-indigo-400 text-xs">Note: Only letters A-Z are allowed. Numbers and spaces will cause words to be ignored.</span>
                                </p>
                                
                                <textarea
                                    value={setupInput}
                                    onChange={(e) => setSetupInput(e.target.value)}
                                    placeholder="example: banana, apple, strawberry, dragonfruit"
                                    className="w-full h-40 bg-slate-900 border border-slate-700 rounded-xl px-4 py-3 text-white placeholder:text-slate-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all mb-6 resize-none font-mono text-sm"
                                ></textarea>

                                <button 
                                    type="submit"
                                    disabled={!setupInput.trim()}
                                    className="w-full bg-indigo-600 hover:bg-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed text-white px-6 py-4 rounded-xl font-bold text-lg transition-colors shadow-lg shadow-indigo-900/50 flex items-center justify-center gap-2"
                                >
                                    Start Game <Trophy size={20} />
                                </button>
                            </form>
                        </div>
                    </div>
                );
            }

            // --- RENDER GAME SCREEN ---
            return (
                <div className="min-h-screen bg-slate-900 text-slate-100 flex flex-col items-center justify-center p-4 font-sans selection:bg-indigo-500 selection:text-white">
                
                {/* Header */}
                <header className="w-full max-w-2xl flex justify-between items-center mb-8 px-4">
                    <h1 className="text-2xl md:text-3xl font-bold bg-gradient-to-r from-indigo-400 to-cyan-400 bg-clip-text text-transparent flex items-center gap-2">
                    <Sparkles className="text-indigo-400" /> Word Hunter
                    </h1>
                    <div className="flex gap-2 md:gap-3">
                    <button 
                        onClick={returnToSetup}
                        className="flex items-center gap-2 bg-slate-800 hover:bg-slate-700 text-slate-300 px-3 py-2 md:px-4 md:py-2 rounded-full text-xs md:text-sm font-medium transition-colors border border-slate-700"
                    >
                        <Settings size={16} /> <span className="hidden sm:inline">New List</span>
                    </button>
                    
                    {/* NEXT WORD BUTTON */}
                    <button 
                        onClick={startNewGame}
                        className="flex items-center gap-2 bg-indigo-600 hover:bg-indigo-500 text-white px-3 py-2 md:px-4 md:py-2 rounded-full text-xs md:text-sm font-medium transition-colors shadow-lg shadow-indigo-900/50"
                    >
                        <span className="hidden sm:inline">Next Word</span> <SkipForward size={16} />
                    </button>
                    </div>
                </header>

                {/* Main Game Card */}
                <div className="w-full max-w-4xl bg-slate-800/50 backdrop-blur-sm rounded-3xl p-6 md:p-12 shadow-2xl border border-slate-700 grid md:grid-cols-2 gap-12">
                    
                    {/* Left Column: Drawing & Status */}
                    <div className="flex flex-col items-center justify-center relative">
                    <div className="w-56 h-56 md:w-64 md:h-64 relative bg-slate-900/50 rounded-2xl border border-slate-700/50 flex items-center justify-center mb-6">
                        <HangmanDrawing mistakes={mistakes} />
                    </div>
                    
                    <div className="text-center">
                        <p className="text-slate-400 text-sm uppercase tracking-widest font-semibold mb-2">Attempts Remaining</p>
                        <div className="flex gap-1 justify-center">
                        {[...Array(MAX_MISTAKES)].map((_, i) => (
                            <div 
                            key={i} 
                            className={`h-3 w-8 rounded-full transition-all duration-300 ${i < (MAX_MISTAKES - mistakes) ? 'bg-cyan-400 shadow-[0_0_10px_rgba(34,211,238,0.5)]' : 'bg-slate-700'}`}
                            />
                        ))}
                        </div>
                    </div>
                    </div>

                    {/* Right Column: Word & Keyboard */}
                    <div className="flex flex-col justify-between h-full">
                    
                    {/* Word Display */}
                    <div className="flex flex-wrap justify-center md:justify-start gap-2 md:gap-3 mb-8 md:mb-12 min-h-[4rem]">
                        {targetWord.split('').map((letter, index) => (
                        <div 
                            key={index}
                            className={`w-8 h-12 md:w-12 md:h-16 flex items-end justify-center border-b-4 text-2xl md:text-4xl font-bold transition-all duration-300 
                            ${gameStatus === 'lost' && !guessedLetters.has(letter) ? 'text-rose-400 border-rose-400/50' : 
                                guessedLetters.has(letter) ? 'text-white border-indigo-500' : 'text-transparent border-slate-600'
                            }`}
                        >
                            {guessedLetters.has(letter) || gameStatus === 'lost' ? letter : ''}
                        </div>
                        ))}
                    </div>

                    {/* Game Over Messages */}
                    {gameStatus !== 'playing' && (
                        <div className={`mb-8 p-4 rounded-xl border flex items-center gap-4 animate-in fade-in slide-in-from-bottom-4 duration-500
                        ${gameStatus === 'won' ? 'bg-emerald-900/30 border-emerald-500/30 text-emerald-200' : 'bg-rose-900/30 border-rose-500/30 text-rose-200'}`}>
                        {gameStatus === 'won' ? <Trophy className="w-8 h-8 flex-shrink-0" /> : <Skull className="w-8 h-8 flex-shrink-0" />}
                        <div>
                            <h3 className="font-bold text-lg">{gameStatus === 'won' ? 'Victory!' : 'Game Over'}</h3>
                            <p className="opacity-80">
                            {gameStatus === 'won' ? 'You solved the word correctly.' : `The word was "${targetWord}".`}
                            </p>
                        </div>
                        <button onClick={startNewGame} className="ml-auto bg-white/10 hover:bg-white/20 px-4 py-2 rounded-lg transition-colors text-sm font-bold flex items-center gap-2">
                             Next Word <SkipForward size={16} />
                        </button>
                        </div>
                    )}

                    {/* Keyboard */}
                    <div className="grid grid-cols-7 gap-1 md:gap-2">
                        {"ABCDEFGHIJKLMNOPQRSTUVWXYZ".split('').map((letter) => {
                        const isGuessed = guessedLetters.has(letter);
                        const isCorrect = targetWord.includes(letter);
                        
                        let btnClass = "bg-slate-700 hover:bg-slate-600 text-slate-300";
                        if (isGuessed) {
                            btnClass = isCorrect 
                            ? "bg-emerald-600 text-white border-emerald-500 opacity-50 cursor-not-allowed" 
                            : "bg-slate-800 text-slate-600 opacity-50 cursor-not-allowed";
                        }

                        return (
                            <button
                            key={letter}
                            disabled={isGuessed || gameStatus !== 'playing'}
                            onClick={() => guessLetter(letter)}
                            className={`
                                aspect-square rounded-lg text-sm md:text-base font-bold transition-all duration-200
                                flex items-center justify-center border-b-4 border-transparent active:border-b-0 active:translate-y-1
                                ${btnClass}
                            `}
                            >
                            {letter}
                            </button>
                        );
                        })}
                    </div>
                    </div>
                </div>
                </div>
            );
        }

        function HangmanDrawing({ mistakes }) {
            const stroke = "stroke-indigo-400";
            const strokeWidth = "4";
            const strokeLinecap = "round";

            return (
                <svg viewBox="0 0 100 100" className="w-full h-full p-4 overflow-visible">
                <line x1="10" y1="95" x2="90" y2="95" className="stroke-slate-600" strokeWidth={strokeWidth} strokeLinecap={strokeLinecap} />
                <line x1="30" y1="95" x2="30" y2="5" className="stroke-slate-600" strokeWidth={strokeWidth} strokeLinecap={strokeLinecap} />
                <line x1="30" y1="5" x2="70" y2="5" className="stroke-slate-600" strokeWidth={strokeWidth} strokeLinecap={strokeLinecap} />
                <line x1="70" y1="5" x2="70" y2="20" className="stroke-slate-600" strokeWidth={strokeWidth} />

                {mistakes >= 1 && (
                    <circle cx="70" cy="30" r="10" className={`${stroke} fill-transparent transition-all duration-500 dash-draw`} strokeWidth={strokeWidth} />
                )}
                
                {mistakes >= 2 && (
                    <line x1="70" y1="40" x2="70" y2="70" className={`${stroke} transition-all duration-500`} strokeWidth={strokeWidth} strokeLinecap={strokeLinecap} />
                )}

                {mistakes >= 3 && (
                    <line x1="70" y1="50" x2="50" y2="60" className={`${stroke} transition-all duration-500`} strokeWidth={strokeWidth} strokeLinecap={strokeLinecap} />
                )}

                {mistakes >= 4 && (
                    <line x1="70" y1="50" x2="90" y2="60" className={`${stroke} transition-all duration-500`} strokeWidth={strokeWidth} strokeLinecap={strokeLinecap} />
                )}

                {mistakes >= 5 && (
                    <line x1="70" y1="70" x2="55" y2="90" className={`${stroke} transition-all duration-500`} strokeWidth={strokeWidth} strokeLinecap={strokeLinecap} />
                )}

                {mistakes >= 6 && (
                    <line x1="70" y1="70" x2="85" y2="90" className={`${stroke} transition-all duration-500`} strokeWidth={strokeWidth} strokeLinecap={strokeLinecap} />
                )}
                </svg>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
